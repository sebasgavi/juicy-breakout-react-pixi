(this["webpackJsonpjuicy-breakout-react-pixi"]=this["webpackJsonpjuicy-breakout-react-pixi"]||[]).push([[0],{27:function(e,t,n){e.exports=n(43)},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var i=n(2),o=n.n(i),a=n(20),r=n.n(a),s=n(0),l=n(3),u=n(1),c=n(5),h=n(6),d=n(13),f=new(n.n(d).a)((function(){return null})),g={transition:!0,wobble:!0,sound:!0,color:!0},v={transition:!0,squishy:!0,sound:!0},p={squishy:!0,wobble:!0,scale:!0,rotation:!0,bounceColor:!0},m={sound:!0},w={music:!1},y={transition:!1,angles:!1,autoStart:!1},x=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);var i=(e=t.call(this,n.tx)).getBounds(),o=.5*i.width,a=.5*i.height;return e.pivot.set(o,a),e}return Object(u.a)(n,null,[{key:"createTexture",value:function(e,t,n,i){var o=new s.Graphics;o.beginFill(t).drawRect(0,0,n,i).endFill(),this.tx=e.renderer.generateTexture(o,1,1)}}]),Object(u.a)(n,[{key:"move",value:function(e){if(v.squishy){var t=Math.abs(this.x-e);this.scale.x=f.map(t,0,60,1,1.6,!0),this.scale.y=f.map(t,0,60,1,.6,!0)}this.x=e}},{key:"process",value:function(){this.scale.set(1,1)}},{key:"addBall",value:function(e){e.position.set(.5*this.getBounds().width,-.5*e.getBounds().height),this.addChild(e)}}]),n}(s.Sprite);x.tx=void 0;var b=n(23),T=n(8),F=n(25),j=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(e,i,o){return Object(l.a)(this,n),"object"===typeof e&&(i=e.y,e=e.x),t.call(this,e,i,o)}return Object(u.a)(n,[{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,e}},{key:"equals",value:function(e,t,i){return e instanceof n||"number"===typeof e&&"number"===typeof t||e.length>0&&e[0]instanceof n?Object(F.a)(Object(T.a)(n.prototype),"equals",this).call(this,e,t,i):!!e&&(this.x===e.x&&this.y===e.y)}}],[{key:"fromBox",value:function(e){return new n(e.x+.5*e.width,e.y+.5*e.height)}}]),n}(d.Vector),O=n(24),M=function(e,t){var n,i=t.duration,o=t.delay,a=t.autoStart,r=void 0===a||a,l=t.frames,u=t.onFinish,c=t.easingFunction||function(e){return e},h=new s.Ticker,d=!1,g=!1,v=l.every((function(e){return e.position})),p=l.every((function(e){return e.scale})),m=l.every((function(e){return"number"===typeof e.rotation})),w=l.every((function(e){return"number"===typeof e.alpha})),y=!v&&!p&&!m&&!w||l.length<2,x=function(){y||g||(d||j(l[0]),n=Date.now(),h.add(T),h.start(),g=!0)},b=function(){y||(j(l[0]),d=!0)},T=function(){var t=(Date.now()-n)/i;if(t>=1)return j(l[l.length-1]),h.destroy(),void("function"===typeof u&&u());var o=l.findIndex((function(e){var n=e.time;return t<n})),a=l[o-1],r=l[o],s=f.map(t,a.time,r.time,0,1,!0),d=c(s);v&&(e.position.x=F(d,a.position.x,r.position.x),e.position.y=F(d,a.position.y,r.position.y)),p&&(e.scale.x=F(d,a.scale.x,r.scale.x),e.scale.y=F(d,a.scale.y,r.scale.y)),m&&(e.rotation=F(d,a.rotation,r.rotation)),w&&(e.alpha=F(d,a.alpha,r.alpha))},F=function(e,t,n){return t+(n-t)*e},j=function(t){v&&e.position.copyFrom(t.position),p&&e.scale.copyFrom(t.scale),m&&(e.rotation=t.rotation),w&&(e.alpha=t.alpha)};return y||function(){if(l[0].time=0,l[l.length-1].time=1,2!==l.length){var e=l.map((function(e,t){var n=e.time;return"number"===typeof n&&(n>=0||n<=1)?t:-1})).filter((function(e){return e>=0}));e.slice(1).map((function(t,n){var i=e[n];return i+1<t?[i,t]:null})).filter((function(e){return e})).forEach((function(e){var t=Object(O.a)(e,2),n=t[0],i=t[1],o=l[n],a=l[i];o.time>a.time&&(a=o);var r=a.time-o.time,s=i-n,u=r/s;Array.from({length:s-1}).forEach((function(e,t){var i=n+t+1,a=o.time+u*(t+1);l[i].time=a}))}))}}(),(o&&o>0&&!0===r||r)&&(b(),setTimeout((function(){return x()}),o||0)),{init:b,start:x}},C=n(15),k=n.n(C),B=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"in",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return Math.pow(t,e)}}},{key:"out",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(n){return 1-e.in(t)(1-n)}}},{key:"inOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(n){return n<=.5?e.in(t)(2*n)/2:1-e.inOut(t)(1-n)}}}]),e}(),S=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n),(e=t.call(this,n.tx)).inStage=void 0,e.vel=void 0,e.logAngles=!1,e.lastTouchedObj=null,e.lastTouchedTime=0,e.touchTransform={scale:new j(1,1),rotation:0};var i=e.getBounds(),o=.5*i.width,a=.5*i.height;return e.pivot.set(o,a),e.inStage=!1,e.vel=new j,e}return Object(u.a)(n,null,[{key:"createTexture",value:function(e,t,n,i){var o=new s.Graphics;o.beginFill(t).drawCircle(0,0,i).endFill(),this.tx=e.renderer.generateTexture(o,1,1),o.clear().beginFill(n).drawCircle(0,0,i).endFill(),this.txBounce=e.renderer.generateTexture(o,1,1)}}]),Object(u.a)(n,[{key:"bounce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.inStage)return!1;if(t&&this.lastTouchedObj===t)return!1;this.lastTouchedObj=t;var i=e.top,o=e.right,a=e.bottom,r=e.left;return i||a?this.vel.y*=-1:(r||o)&&(this.vel.x*=-1),p.wobble?this.setWobble(p.squishy):p.squishy&&this.setSquishy(),p.bounceColor&&(this.lastTouchedTime=Date.now(),this.texture=n.txBounce),!0}},{key:"release",value:function(){this.inStage=!0,this.vel=new j(0,-10);var e=.3*Math.PI,t=Math.random()*e-.5*e;this.vel.rotate(t)}},{key:"process",value:function(e,t,i){var o;if(this.inStage){if(this.texture===n.txBounce)Date.now()-this.lastTouchedTime>n.bounceTextureDuration&&(this.texture=n.tx);if(p.scale&&this.scale.set(1.5,1),p.rotation&&(this.rotation=this.vel.heading()),t&&t.top&&i){var a=.1*Math.PI,r=.5*e.getBounds(!0).width+.5*this.getBounds(!0).width,s=a*((this.position.x-e.position.x)/r);this.logAngles&&console.log("\n\nincoming: ",Math.round(f.degrees(this.vel.heading()))),this.logAngles&&console.log("inverted: ",Math.round(f.degrees(this.vel.heading()))),this.vel.rotate(s),this.logAngles&&console.log("rotated: ",Math.round(180*s/Math.PI),Math.round(f.degrees(this.vel.heading())));var l=-.18*Math.PI,u=Math.PI*-(1-.18),c=this.vel.heading();c>l&&this.vel.rotate(-1*(c-l)),c<u&&this.vel.rotate(-1*(c-u)),this.logAngles&&console.log("final: ",Math.round(f.degrees(this.vel.heading())),Math.round(180*u/Math.PI),Math.round(180*l/Math.PI))}(o=this.position).set.apply(o,Object(b.a)(new j(this.position).add(this.vel).array()))}}},{key:"setSquishy",value:function(){M(this,{frames:[{scale:new j(1.5,1.5)},{scale:new j(this.scale)}],duration:50,autoStart:!0,easingFunction:n.squishyBezier})}},{key:"setWobble",value:function(e){var t=new j(this.scale);M(this,{frames:[{scale:e?new j(1.5,1.5):t},{scale:new j(1.4,.7)},{scale:new j(1,1.3)},{scale:new j(1.2,.8)},{scale:t}],duration:800,autoStart:!0,easingFunction:n.wobbleEase})}}]),n}(s.Sprite);S.tx=void 0,S.txBounce=void 0,S.squishyBezier=k()(0,1.54,.37,.74),S.wobbleEase=B.inOut(1.5),S.bounceTextureDuration=100;var A=n(17),P=n.n(A),G=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(e,i){var o;Object(l.a)(this,n),(o=t.call(this,n.tx)).lastTxChangedTime=0;var a=o.getBounds(),r=.5*a.width,s=.5*a.height;return o.pivot.set(r,s),o.position.set(e+r,i+s),o}return Object(u.a)(n,null,[{key:"createTexture",value:function(e,t,n,i){var o=new s.Graphics;o.beginFill(t).drawRect(0,0,n,i).endFill(),this.tx=e.renderer.generateTexture(o,1,1),this.txDists=P.a.scale(["blue","white"]).colors(20).map((function(t){return o.clear().beginFill(P()(t).num()).drawRect(0,0,n,i).endFill(),e.renderer.generateTexture(o,1,1)}))}}]),Object(u.a)(n,[{key:"changeTexture",value:function(e){e<0&&(e=0),e>1&&(e=1);var t=Math.floor(e*(n.txDists.length-1));this.texture=n.txDists[t],this.lastTxChangedTime=Date.now()}},{key:"process",value:function(){this.texture!==n.tx&&(Date.now()-this.lastTxChangedTime>n.hitTextureDuration&&(this.texture=n.tx))}}]),n}(s.Sprite);G.tx=void 0,G.txDists=void 0,G.hitTextureDuration=200;var D,E,q,I,R,H=n(26),z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e.renderable||!t.renderable)return!1;var i=L(e),o=L(t),a=J(i,o);if(a){var r=W(i,o,n),s=r.sides;return Object(H.a)({},s)}return!1},W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=j.fromBox(e),o=j.fromBox(t),a=j.sub(o,i).heading(),r=0===n?new j(.5*t.width,.5*t.height):new j,s=new j(e.x-r.x,e.y-r.y),l=new j(e.x+e.width+r.x,e.y-r.y),u=j.sub(s,i).heading(),c=j.sub(l,i).heading(),h=-1*u,d=-1*c,f={top:a>=u&&a<c,right:a>=c&&a<d,bottom:a>=d&&a<h,left:a>=h||a<u};return{angle:a,leftTopAng:u,rightTopAng:c,leftBottomAng:h,rightBottomAng:d,vectorA:i,vectorB:o,sides:f}},J=function(e,t){var n=t.x+t.width>e.x,i=t.x<e.x+e.width,o=t.y+t.height>e.y,a=t.y<e.y+e.height;return n&&i&&o&&a},L=function(e){var t,n="touchTransform"in e&&e.touchTransform?e.touchTransform:{},i=n.scale,o=n.rotation,a="number"===typeof o,r=i instanceof j;if(a||r){var s=new j(e.scale),l=e.rotation;r&&e.scale.copyFrom(i),a&&(e.rotation=o),e.updateTransform(),t=e.getBounds(!0),r&&(e.rotation=l),a&&e.scale.copyFrom(s),e.updateTransform()}else t=e.getBounds(!0);return t},V=n(10),_=0,K=0,N=function(){var e="".concat("/juicy-breakout-react-pixi","/assets/sound");I=Array.from({length:12}).map((function(t,n){return new V.Howl({src:"".concat(e,"/pling").concat(n+1,".mp3")})})),q=new V.Howl({src:"".concat(e,"/ball-paddle.mp3")}),E=new V.Howl({src:"".concat(e,"/ball-wall.mp3")}),D=new V.Howl({src:"".concat(e,"/juicy_breakout-theme.mp3"),loop:!0,volume:.3}),w.music&&D.play()},Q=function(){if(g.sound){var e=Date.now();K++,e-_>1e3&&(K=0),K>=I.length&&(K=I.length-1),I[K].play(),_=e}},U=function(){v.sound&&q.play()},X=function(){m.sound&&E.play()},Y=n(22),Z=Date.now(),$=function(e,t){var n=new s.Graphics;n.beginFill(16777215).drawCircle(0,0,20).endFill();var i=e.renderer.generateTexture(n,1,1);R=new Y.a(t,[i],{alpha:{start:.3,end:.43},scale:{start:.32,end:.01,minimumScaleMultiplier:1.02},color:{start:"#e680ed",end:"#ff0000"},speed:{start:40,end:100,minimumSpeedMultiplier:2},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:.39,max:.9},blendMode:"normal",frequency:.001,emitterLifetime:.1,maxParticles:200,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"})},ee=function(e){R.updateSpawnPos(e.x,e.y),R.resetPositionTracking(),R.emit=!0},te=function(){var e=Date.now(),t=e-Z;R.emit&&t>500&&(R.emit=!1),R.update(.001*t),Z=e},ne=function(){N();var e,t,n=new s.Application({width:window.innerWidth,height:window.innerHeight}),i=new s.Ticker,o=new s.Container,a=new s.Container,r=new s.Container,l=new s.Container,u=!v.transition,c=function(){if(e.process(),t.inStage){te();var n=z(e,t,1),i=n&&t.bounce(n,e);i&&(h(),U()),t.process(e,n,i),a.children.some((function(e){e instanceof G&&e.process();var n=z(e,t);return n&&(t.bounce(n),a.removeChild(e),h(!0),Q()),n})),r.children.forEach((function(e){var n=z(e,t,1);n&&(t.bounce(n,e),h(),X())}))}},h=function(e){if(t.inStage){ee(t.position);var i=G.tx.width,o=n.view.width/2,r=new j(t.position);a.children.forEach((function(t){var n=e?r.dist(new j(t.position)):0,a=e?f.map(n,i,o,0,200,!0):70*Math.random(),s=e?n/o:Math.random();g.color&&t instanceof G&&t.changeTexture(s),g.wobble&&M(t,{frames:[{scale:new j(1,1),rotation:0},{scale:new j(1.1,1.1),rotation:.2*Math.random()-.1},{scale:new j(.9,.9),rotation:.2*Math.random()-.1},{scale:new j(1,1),rotation:0}],duration:200,delay:a})}))}},d=function(t){u&&e.move(t.data.global.x)},p=function(e){t.inStage||(t.getGlobalPosition().copyTo(t.position),n.stage.addChild(t),t.release())};return y.angles?function(e){var t=e.view,n=t.width,i=t.height;G.createTexture(e,13373900,200,20);var o=new G(.5*n,.5*i);e.stage.addChild(o),S.createTexture(e,13431057,13431057,20);var a=new S;e.stage.addChild(a),e.stage.interactive=!0;var r=new s.Graphics,l=new s.TextStyle({fontSize:14,fill:"#ffffff"});e.stage.addChild(r),e.stage.on("mousemove",(function(e){a.position.copyFrom(e.data.global);var t=o.getBounds(),n=a.getBounds(),i=W(t,n,1),u=i.angle,c=i.leftTopAng,h=i.rightTopAng,d=i.leftBottomAng,g=i.rightBottomAng,v=i.vectorA,p=i.sides,m=j.fromAngle(c).mult(200).add(v),w=j.fromAngle(h).mult(200).add(v),y=j.fromAngle(d).mult(200).add(v),x=j.fromAngle(g).mult(200).add(v),b=Object.keys(p).find((function(e){return p[e]}));r.removeChildren(),r.clear().lineStyle(2,16777215).moveTo(o.getGlobalPosition().x,o.getGlobalPosition().y).lineTo(a.x,a.y).moveTo(m.x,m.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y).moveTo(w.x,w.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y).moveTo(y.x,y.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y).moveTo(x.x,x.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y);var T=new s.Text(Math.round(f.degrees(u))+" "+b,l);T.position.x=a.position.x+15,T.position.y=a.position.y+15,r.addChild(T)}))}(n):y.transition?function(e){var t=e.view,n=t.width,i=t.height;S.createTexture(e,13431057,13431057,20);var o=new S;o.position.set(.5*n,.5*i),e.stage.addChild(o);var a=new j(1,1.5),r=function(){console.clear(),M(o,{frames:[{scale:a},{scale:new j(1.4,.7)},{scale:new j(1,1.3)},{scale:new j(1.2,.8)},{scale:new j(1,1)}],duration:800,autoStart:!0,easingFunction:B.inOut(1.5)})};r(),setInterval(r,1300)}(n):function(){var h=n.view,f=h.width,m=h.height;$(n,o);var w=(new s.Graphics).beginFill(0).drawRect(0,0,f,m).endFill();n.stage.addChild(w),function(e,t,n,i){var o=e.view,a=o.width,r=o.height,l=(new s.Graphics).beginFill(i).drawRect(-n,-n,a+n,n).endFill(),u=(new s.Graphics).beginFill(i).drawRect(a,-n,n,r+n).endFill(),c=(new s.Graphics).beginFill(i).drawRect(-n,r,a+n,n).endFill(),h=(new s.Graphics).beginFill(i).drawRect(-n,-n,n,r+n).endFill();t.addChild(l),t.addChild(u),t.addChild(c),t.addChild(h)}(n,r,100,1166540),n.stage.addChild(r),(a=function(e,t,n,i,o,a,r,s){var l=(i-s*(a-1))/a,u=(o-s*(r-1))/r,c=k()(.48,1.52,.34,.87);return G.createTexture(e,n,l,u),Array.from({length:a*r}).forEach((function(e,n){var i=Math.floor(n/a),o=new G((n-i*a)*(l+s),i*(u+s));t.addChild(o),g.transition&&M(o,{frames:[{position:new j(o.position).add(j.random2D().mult(100)),scale:new j(.4,.4),alpha:0,rotation:Math.random()*Math.PI*.2-.1*Math.PI},{position:new j(o.position),scale:new j(1,1),alpha:1,rotation:0}],duration:600+200*Math.random(),delay:700*Math.random(),easingFunction:c})})),t}(n,a,13373900,.8*f,.35*m,8,6,20)).position.set(.1*f,.1*f),o.addChild(a),S.createTexture(n,13431057,16777215,20),t=new S,x.createTexture(n,13373713,.15*f,40),(e=new x).position.set(.5*f,m-60),e.addBall(t),o.addChild(e),v.transition&&M(e,{frames:[{position:new j(e.position).add(0,300),scale:new j(.3,.3)},{position:new j(e.position),scale:new j(1,1)}],duration:500,delay:400,easingFunction:B.out(3),onFinish:function(){u=!0,y.autoStart&&(p(null),e.position.y=-100)}}),n.stage.addChild(o),n.stage.addChild(l),n.stage.interactive=!0,n.stage.on("mousemove",d),n.stage.on("mousedown",p),n.renderer.plugins.interaction.cursorStyles.default="none",i.add(c),i.start()}(),n},ie=function(){var e=i.useRef(null),t=i.useRef(null);return i.useEffect((function(){t.current=ne(),e.current.append(t.current.view)}),[]),i.createElement("div",{ref:e})},oe=function(){return o.a.createElement(ie,null)};n(42);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(oe,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.ec954023.chunk.js.map