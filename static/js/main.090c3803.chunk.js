(this["webpackJsonpjuicy-breakout-react-pixi"]=this["webpackJsonpjuicy-breakout-react-pixi"]||[]).push([[0],{26:function(e,t,n){e.exports=n(42)},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var i=n(2),o=n.n(i),a=n(20),r=n.n(a),s=n(0),l=n(3),u=n(1),c=n(5),h=n(6),d=n(13),f=new(n.n(d).a)((function(){return null})),g={transition:!0,wobble:!0,sound:!0,color:!0},v={transition:!0,squishy:!0,sound:!0},w={squishy:!0,wobble:!0,scale:!0,rotation:!0,bounceColor:!0},m={sound:!0},p={music:!0},y={transition:!1,angles:!1},b=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);var i=(e=t.call(this,n.tx)).getBounds(),o=.5*i.width,a=.5*i.height;return e.pivot.set(o,a),e}return Object(u.a)(n,null,[{key:"createTexture",value:function(e,t,n,i){var o=new s.c;o.beginFill(t).drawRect(0,0,n,i).endFill(),this.tx=e.renderer.generateTexture(o,1,1)}}]),Object(u.a)(n,[{key:"move",value:function(e){if(v.squishy){var t=Math.abs(this.x-e);this.scale.x=f.map(t,0,60,1,1.6,!0),this.scale.y=f.map(t,0,60,1,.6,!0)}this.x=e}},{key:"process",value:function(){this.scale.set(1,1)}},{key:"addBall",value:function(e){e.position.set(.5*this.getBounds().width,-.5*e.getBounds().height),this.addChild(e)}}]),n}(s.d);b.tx=void 0;var x=n(22),T=n(8),j=n(24),F=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(e,i,o){return Object(l.a)(this,n),"object"===typeof e&&(i=e.y,e=e.x),t.call(this,e,i,o)}return Object(u.a)(n,[{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,e}},{key:"equals",value:function(e,t,i){return e instanceof n||"number"===typeof e&&"number"===typeof t||e.length>0&&e[0]instanceof n?Object(j.a)(Object(T.a)(n.prototype),"equals",this).call(this,e,t,i):!!e&&(this.x===e.x&&this.y===e.y)}}],[{key:"fromBox",value:function(e){return new n(e.x+.5*e.width,e.y+.5*e.height)}}]),n}(d.Vector),O=n(23),M=function(e,t){var n,i=t.duration,o=t.delay,a=t.autoStart,r=void 0===a||a,l=t.frames,u=t.onFinish,c=t.easingFunction||function(e){return e},h=new s.g,d=!1,g=!1,v=l.every((function(e){return e.position})),w=l.every((function(e){return e.scale})),m=l.every((function(e){return"number"===typeof e.rotation})),p=l.every((function(e){return"number"===typeof e.alpha})),y=!v&&!w&&!m&&!p||l.length<2,b=function(){y||g||(d||F(l[0]),n=Date.now(),h.add(T),h.start(),g=!0)},x=function(){y||(F(l[0]),d=!0)},T=function(){var t=(Date.now()-n)/i;if(t>=1)return F(l[l.length-1]),h.destroy(),void("function"===typeof u&&u());var o=l.findIndex((function(e){var n=e.time;return t<n})),a=l[o-1],r=l[o],s=f.map(t,a.time,r.time,0,1,!0),d=c(s);v&&(e.position.x=j(d,a.position.x,r.position.x),e.position.y=j(d,a.position.y,r.position.y)),w&&(e.scale.x=j(d,a.scale.x,r.scale.x),e.scale.y=j(d,a.scale.y,r.scale.y)),m&&(e.rotation=j(d,a.rotation,r.rotation)),p&&(e.alpha=j(d,a.alpha,r.alpha))},j=function(e,t,n){return t+(n-t)*e},F=function(t){v&&e.position.copyFrom(t.position),w&&e.scale.copyFrom(t.scale),m&&(e.rotation=t.rotation),p&&(e.alpha=t.alpha)};return y||function(){if(l[0].time=0,l[l.length-1].time=1,2!==l.length){var e=l.map((function(e,t){var n=e.time;return"number"===typeof n&&(n>=0||n<=1)?t:-1})).filter((function(e){return e>=0}));e.slice(1).map((function(t,n){var i=e[n];return i+1<t?[i,t]:null})).filter((function(e){return e})).forEach((function(e){var t=Object(O.a)(e,2),n=t[0],i=t[1],o=l[n],a=l[i];o.time>a.time&&(a=o);var r=a.time-o.time,s=i-n,u=r/s;Array.from({length:s-1}).forEach((function(e,t){var i=n+t+1,a=o.time+u*(t+1);l[i].time=a}))}))}}(),(o&&o>0&&!0===r||r)&&(x(),setTimeout((function(){return b()}),o||0)),{init:x,start:b}},B=n(15),k=n.n(B),C=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"in",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return Math.pow(t,e)}}},{key:"out",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(n){return 1-e.in(t)(1-n)}}},{key:"inOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(n){return n<=.5?e.in(t)(2*n)/2:1-e.inOut(t)(1-n)}}}]),e}(),A=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n),(e=t.call(this,n.tx)).inStage=void 0,e.vel=void 0,e.logAngles=!1,e.lastTouchedObj=null,e.lastTouchedTime=0,e.touchTransform={scale:new F(1,1),rotation:0};var i=e.getBounds(),o=.5*i.width,a=.5*i.height;return e.pivot.set(o,a),e.inStage=!1,e.vel=new F,e}return Object(u.a)(n,null,[{key:"createTexture",value:function(e,t,n,i){var o=new s.c;o.beginFill(t).drawCircle(0,0,i).endFill(),this.tx=e.renderer.generateTexture(o,1,1),o.clear().beginFill(n).drawCircle(0,0,i).endFill(),this.txBounce=e.renderer.generateTexture(o,1,1)}}]),Object(u.a)(n,[{key:"bounce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.inStage)return!1;if(t&&this.lastTouchedObj===t)return!1;this.lastTouchedObj=t;var i=e.top,o=e.right,a=e.bottom,r=e.left;return i||a?this.vel.y*=-1:(r||o)&&(this.vel.x*=-1),w.wobble?this.setWobble(w.squishy):w.squishy&&this.setSquishy(),w.bounceColor&&(this.lastTouchedTime=Date.now(),this.texture=n.txBounce),!0}},{key:"release",value:function(){this.inStage=!0,this.vel=new F(0,-10);var e=.3*Math.PI,t=Math.random()*e-.5*e;this.vel.rotate(t)}},{key:"process",value:function(e,t,i){var o;if(this.inStage){if(this.texture===n.txBounce)Date.now()-this.lastTouchedTime>n.bounceTextureDuration&&(this.texture=n.tx);if(w.scale&&this.scale.set(1.5,1),w.rotation&&(this.rotation=this.vel.heading()),t&&t.top&&i){var a=.1*Math.PI,r=.5*e.getBounds(!0).width+.5*this.getBounds(!0).width,s=a*((this.position.x-e.position.x)/r);this.logAngles&&console.log("\n\nincoming: ",Math.round(f.degrees(this.vel.heading()))),this.logAngles&&console.log("inverted: ",Math.round(f.degrees(this.vel.heading()))),this.vel.rotate(s),this.logAngles&&console.log("rotated: ",Math.round(180*s/Math.PI),Math.round(f.degrees(this.vel.heading())));var l=-.18*Math.PI,u=Math.PI*-(1-.18),c=this.vel.heading();c>l&&this.vel.rotate(-1*(c-l)),c<u&&this.vel.rotate(-1*(c-u)),this.logAngles&&console.log("final: ",Math.round(f.degrees(this.vel.heading())),Math.round(180*u/Math.PI),Math.round(180*l/Math.PI))}(o=this.position).set.apply(o,Object(x.a)(new F(this.position).add(this.vel).array()))}}},{key:"setSquishy",value:function(){M(this,{frames:[{scale:new F(1.5,1.5)},{scale:new F(this.scale)}],duration:50,autoStart:!0,easingFunction:n.squishyBezier})}},{key:"setWobble",value:function(e){var t=new F(this.scale);M(this,{frames:[{scale:e?new F(1.5,1.5):t},{scale:new F(1.4,.7)},{scale:new F(1,1.3)},{scale:new F(1.2,.8)},{scale:t}],duration:800,autoStart:!0,easingFunction:n.wobbleEase})}}]),n}(s.d);A.tx=void 0,A.txBounce=void 0,A.squishyBezier=k()(0,1.54,.37,.74),A.wobbleEase=C.inOut(1.5),A.bounceTextureDuration=100;var P=n(17),S=n.n(P),D=function(e){Object(h.a)(n,e);var t=Object(c.a)(n);function n(e,i){var o;Object(l.a)(this,n),(o=t.call(this,n.tx)).lastTxChangedTime=0;var a=o.getBounds(),r=.5*a.width,s=.5*a.height;return o.pivot.set(r,s),o.position.set(e+r,i+s),o}return Object(u.a)(n,null,[{key:"createTexture",value:function(e,t,n,i){var o=new s.c;o.beginFill(t).drawRect(0,0,n,i).endFill(),this.tx=e.renderer.generateTexture(o,1,1),this.txDists=S.a.scale(["blue","white"]).colors(20).map((function(t){return o.clear().beginFill(S()(t).num()).drawRect(0,0,n,i).endFill(),e.renderer.generateTexture(o,1,1)}))}}]),Object(u.a)(n,[{key:"changeTexture",value:function(e){e<0&&(e=0),e>1&&(e=1);var t=Math.floor(e*(n.txDists.length-1));this.texture=n.txDists[t],this.lastTxChangedTime=Date.now()}},{key:"process",value:function(){this.texture!==n.tx&&(Date.now()-this.lastTxChangedTime>n.hitTextureDuration&&(this.texture=n.tx))}}]),n}(s.d);D.tx=void 0,D.txDists=void 0,D.hitTextureDuration=200;var E,I,q,G=n(25),R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e.renderable||!t.renderable)return!1;var i=W(e),o=W(t),a=z(i,o);if(a){var r=H(i,o,n),s=r.sides;return Object(G.a)({},s)}return!1},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=F.fromBox(e),o=F.fromBox(t),a=F.sub(o,i).heading(),r=0===n?new F(.5*t.width,.5*t.height):new F,s=new F(e.x-r.x,e.y-r.y),l=new F(e.x+e.width+r.x,e.y-r.y),u=F.sub(s,i).heading(),c=F.sub(l,i).heading(),h=-1*u,d=-1*c,f={top:a>=u&&a<c,right:a>=c&&a<d,bottom:a>=d&&a<h,left:a>=h||a<u};return{angle:a,leftTopAng:u,rightTopAng:c,leftBottomAng:h,rightBottomAng:d,vectorA:i,vectorB:o,sides:f}},z=function(e,t){var n=t.x+t.width>e.x,i=t.x<e.x+e.width,o=t.y+t.height>e.y,a=t.y<e.y+e.height;return n&&i&&o&&a},W=function(e){var t,n="touchTransform"in e&&e.touchTransform?e.touchTransform:{},i=n.scale,o=n.rotation,a="number"===typeof o,r=i instanceof F;if(a||r){var s=new F(e.scale),l=e.rotation;r&&e.scale.copyFrom(i),a&&(e.rotation=o),e.updateTransform(),t=e.getBounds(!0),r&&(e.rotation=l),a&&e.scale.copyFrom(s),e.updateTransform()}else t=e.getBounds(!0);return t},J=n(10),V=0,_=0,K=function(){var e="".concat("/juicy-breakout-react-pixi","/assets/sound");q=Array.from({length:12}).map((function(t,n){return new J.Howl({src:"".concat(e,"/pling").concat(n+1,".mp3")})})),I=new J.Howl({src:"".concat(e,"/ball-paddle.mp3")}),E=new J.Howl({src:"".concat(e,"/ball-wall.mp3")}),new J.Howl({src:"".concat(e,"/juicy_breakout-theme.mp3"),autoplay:p.music,loop:!0,volume:.3})},L=function(){if(g.sound){var e=Date.now();_++,e-V>1e3&&(_=0),_>=q.length&&(_=q.length-1),q[_].play(),V=e}},N=function(){v.sound&&I.play()},Q=function(){m.sound&&E.play()},U=function(){K();var e,t,n=new s.a({width:window.innerWidth,height:window.innerHeight}),i=new s.g,o=new s.b,a=new s.b,r=new s.b,l=new s.b,u=!v.transition,c=function(){if(e.process(),t.inStage){var n=R(e,t,1),i=n&&t.bounce(n,e);i&&(h(),N()),t.process(e,n,i),a.children.some((function(e){e instanceof D&&e.process();var n=R(e,t);return n&&(t.bounce(n),a.removeChild(e),h(!0),L()),n})),r.children.forEach((function(e){var n=R(e,t,1);n&&(t.bounce(n,e),h(),Q())}))}},h=function(e){if(t.inStage){var i=D.tx.width,o=n.view.width/2,r=new F(t.position);a.children.forEach((function(t){var n=e?r.dist(new F(t.position)):0,a=e?f.map(n,i,o,0,200,!0):70*Math.random(),s=e?n/o:Math.random();g.color&&t instanceof D&&t.changeTexture(s),g.wobble&&M(t,{frames:[{scale:new F(1,1),rotation:0},{scale:new F(1.1,1.1),rotation:.2*Math.random()-.1},{scale:new F(.9,.9),rotation:.2*Math.random()-.1},{scale:new F(1,1),rotation:0}],duration:200,delay:a})}))}},d=function(t){u&&e.move(t.data.global.x)},w=function(e){t.inStage||(t.getGlobalPosition().copyTo(t.position),n.stage.addChild(t),t.release())};return y.angles?function(e){var t=e.view,n=t.width,i=t.height;D.createTexture(e,13373900,200,20);var o=new D(.5*n,.5*i);e.stage.addChild(o),A.createTexture(e,13431057,13431057,20);var a=new A;e.stage.addChild(a),e.stage.interactive=!0;var r=new s.c,l=new s.f({fontSize:14,fill:"#ffffff"});e.stage.addChild(r),e.stage.on("mousemove",(function(e){a.position.copyFrom(e.data.global);var t=o.getBounds(),n=a.getBounds(),i=H(t,n,1),u=i.angle,c=i.leftTopAng,h=i.rightTopAng,d=i.leftBottomAng,g=i.rightBottomAng,v=i.vectorA,w=i.sides,m=F.fromAngle(c).mult(200).add(v),p=F.fromAngle(h).mult(200).add(v),y=F.fromAngle(d).mult(200).add(v),b=F.fromAngle(g).mult(200).add(v),x=Object.keys(w).find((function(e){return w[e]}));r.removeChildren(),r.clear().lineStyle(2,16777215).moveTo(o.getGlobalPosition().x,o.getGlobalPosition().y).lineTo(a.x,a.y).moveTo(m.x,m.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y).moveTo(p.x,p.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y).moveTo(y.x,y.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y).moveTo(b.x,b.y).lineTo(o.getGlobalPosition().x,o.getGlobalPosition().y);var T=new s.e(Math.round(f.degrees(u))+" "+x,l);T.position.x=a.position.x+15,T.position.y=a.position.y+15,r.addChild(T)}))}(n):y.transition?function(e){var t=e.view,n=t.width,i=t.height;A.createTexture(e,13431057,13431057,20);var o=new A;o.position.set(.5*n,.5*i),e.stage.addChild(o);var a=new F(1,1.5),r=function(){console.clear(),M(o,{frames:[{scale:a},{scale:new F(1.4,.7)},{scale:new F(1,1.3)},{scale:new F(1.2,.8)},{scale:new F(1,1)}],duration:800,autoStart:!0,easingFunction:C.inOut(1.5)})};r(),setInterval(r,1300)}(n):function(){var h=n.view,f=h.width,m=h.height,p=(new s.c).beginFill(0).drawRect(0,0,f,m).endFill();n.stage.addChild(p),function(e,t,n,i){var o=e.view,a=o.width,r=o.height,l=(new s.c).beginFill(i).drawRect(-n,-n,a+n,n).endFill(),u=(new s.c).beginFill(i).drawRect(a,-n,n,r+n).endFill(),c=(new s.c).beginFill(i).drawRect(-n,r,a+n,n).endFill(),h=(new s.c).beginFill(i).drawRect(-n,-n,n,r+n).endFill();t.addChild(l),t.addChild(u),t.addChild(c),t.addChild(h)}(n,r,100,1166540),n.stage.addChild(r),(a=function(e,t,n,i,o,a,r,s){var l=(i-s*(a-1))/a,u=(o-s*(r-1))/r,c=k()(.48,1.52,.34,.87);return D.createTexture(e,n,l,u),Array.from({length:a*r}).forEach((function(e,n){var i=Math.floor(n/a),o=new D((n-i*a)*(l+s),i*(u+s));t.addChild(o),g.transition&&M(o,{frames:[{position:new F(o.position).add(F.random2D().mult(100)),scale:new F(.4,.4),alpha:0,rotation:Math.random()*Math.PI*.2-.1*Math.PI},{position:new F(o.position),scale:new F(1,1),alpha:1,rotation:0}],duration:600+200*Math.random(),delay:700*Math.random(),easingFunction:c})})),t}(n,a,13373900,.8*f,.35*m,8,6,20)).position.set(.1*f,.1*f),o.addChild(a),A.createTexture(n,13431057,16777215,20),t=new A,b.createTexture(n,13373713,.15*f,40),(e=new b).position.set(.5*f,m-60),e.addBall(t),o.addChild(e),v.transition&&M(e,{frames:[{position:new F(e.position).add(0,300),scale:new F(.3,.3)},{position:new F(e.position),scale:new F(1,1)}],duration:500,delay:400,easingFunction:C.out(3),onFinish:function(){return u=!0}}),n.stage.addChild(o),n.stage.addChild(l),n.stage.interactive=!0,n.stage.on("mousemove",d),n.stage.on("mousedown",w),n.renderer.plugins.interaction.cursorStyles.default="none",i.add(c),i.start()}(),n},X=function(){var e=i.useRef(null),t=i.useRef(null);return i.useEffect((function(){t.current=U(),e.current.append(t.current.view)}),[]),i.createElement("div",{ref:e})},Y=function(){return o.a.createElement(X,null)};n(41);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Y,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.090c3803.chunk.js.map